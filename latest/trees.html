<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Trees · Compose.jl documentation</title><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script></head><body><nav class="toc"><h1>Compose.jl</h1><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="trees.html">Trees</a><ul class="internal"><li><a class="toctext" href="#Everything-is-a-tree-1">Everything is a tree</a></li><li><a class="toctext" href="#The-compose-function-accepts-S-expressions-1">The compose function accepts S-expressions</a></li><li><a class="toctext" href="#Trees-can-be-visualized-with-introspect-1">Trees can be visualized with introspect</a></li></ul></li><li><a class="toctext" href="contexts.html">Contexts</a></li><li><a class="toctext" href="measures.html">Measures</a></li><li><a class="toctext" href="forms.html">Forms</a></li><li><a class="toctext" href="graphs.html">Graphs</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="trees.html">Trees</a></li></ul><a class="edit-page" href="https://github.com/Hydrotoast/Compose.jl/tree/bd7b959e49c50374c79c9dbebbbcf911f5b7a452/docs/src/trees.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h2><a class="nav-anchor" id="Everything-is-a-tree-1" href="#Everything-is-a-tree-1">Everything is a tree</a></h2><p>Graphics in Compose are defined using a tree structure. It&#39;s not unlike SVG in this regard, but has simpler semantics. There are three important types that make up the nodes of the tree:</p><ul><li><p><code>Context</code>: An internal node.</p></li><li><p><code>Form</code>: A leaf node that defines some geometry, like a line or a polygon.</p></li><li><p><code>Property</code>: A leaf node that modifies how its parent&#39;s subtree is drawn, like fill color, font family, or line width.</p></li></ul><p>The all-important function in Compose, is called, not surprisingly, <code>compose</code>. Calling <code>compose(a, b)</code> will return a new tree rooted at <code>a</code> and with <code>b</code> attached as a child.</p><p>That&#39;s enough to start drawing some simple shapes.</p><div></div><div><pre><code class="language-julia">using Compose

composition = compose(compose(context(), rectangle()), fill(&quot;tomato&quot;))
draw(SVG(&quot;tomato.svg&quot;, 4cm, 4cm), composition)</code></pre></div><p><img src="tomato.svg" alt/></p><h2><a class="nav-anchor" id="The-compose-function-accepts-S-expressions-1" href="#The-compose-function-accepts-S-expressions-1">The compose function accepts S-expressions</a></h2><p>In the first example, we had to call <code>compose</code> twice just to draw a lousy red square. Fortunately <code>compose</code> has a few tricks up its sleeve. As everyone from lisp hackers and <a href="http://en.wikipedia.org/wiki/Newick_format">phylogeneticists</a> knows, trees can be defined most tersely using S-expressions. We can rewrite our first example like:</p><pre><code class="language-julia"># equivalent to compose(compose(context(), rectangle()), fill(&quot;tomato&quot;)))
compose(context(), rectangle(), fill(&quot;tomato&quot;))</code></pre><p>Furthermore, more complex trees can be formed by grouping subtrees with parenthesis or brackets.</p><div><pre><code class="language-julia">composition = compose(context(),
        (context(), circle(), fill(&quot;bisque&quot;)),
        (context(), rectangle(), fill(&quot;tomato&quot;)))
draw(SVG(&quot;tomato_bisque.svg&quot;, 4cm, 4cm), composition)</code></pre></div><p><img src="tomato_bisque.svg" alt/></p><h2><a class="nav-anchor" id="Trees-can-be-visualized-with-introspect-1" href="#Trees-can-be-visualized-with-introspect-1">Trees can be visualized with introspect</a></h2><p>A useful function for visualizing the graphic that you&#39;ve constructed is <code>introspect</code>. It takes a <code>Context</code> defining a graphic and returns a new graphic with a schematic of the tree.</p><div><pre><code class="language-julia">tomato_bisque =
    compose(context(),
            (context(), circle(), fill(&quot;bisque&quot;)),
            (context(), rectangle(), fill(&quot;tomato&quot;)))

introspect(tomato_bisque)</code></pre><?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.2"
     width="60mm" height="60mm" viewBox="0 0 60 60"
     stroke="none"
     fill="#000000"
     stroke-width="0.3"
     font-size="3.88"
>
<g fill="#303030" id="img-d33459f5-1">
  <rect x="0" y="0" width="60" height="60"/>
</g>
<g stroke="#F4E6D6" id="img-d33459f5-2">
  <path fill="none" d="M22.5,30 L 52.5 50"/>
  <path fill="none" d="M22.5,30 L 37.5 50"/>
  <path fill="none" d="M7.5,30 L 22.5 50"/>
  <path fill="none" d="M7.5,30 L 7.5 50"/>
  <path fill="none" d="M7.5,10 L 22.5 30"/>
  <path fill="none" d="M7.5,10 L 7.5 30"/>
</g>
<g stroke-width="0.5" stroke="#303030" id="img-d33459f5-3">
  <g fill="#FF6B69" id="img-d33459f5-4">
    <path d="M49.5,47 L 55.5 47 52.5 53 z"/>
  </g>
  <g fill="#00C5C0" id="img-d33459f5-5">
    <rect x="34.5" y="47" width="6" height="6"/>
  </g>
  <g fill="#000000" id="img-d33459f5-6">
    <text x="37.5" y="50" text-anchor="middle" dy="0.35em">C</text>
  </g>
  <g fill="#FF6B69" id="img-d33459f5-7">
    <path d="M19.5,47 L 25.5 47 22.5 53 z"/>
  </g>
  <g fill="#00C5C0" id="img-d33459f5-8">
    <rect x="4.5" y="47" width="6" height="6"/>
  </g>
  <g fill="#000000" id="img-d33459f5-9">
    <text x="7.5" y="50" text-anchor="middle" dy="0.35em">R</text>
  </g>
  <g fill="#F4E6D6" id="img-d33459f5-10">
    <use xlink:href="#img-d33459f5-11" x="22.5" y="30"/>
  </g>
  <g fill="#F4E6D6" id="img-d33459f5-12">
    <use xlink:href="#img-d33459f5-13" x="7.5" y="30"/>
  </g>
  <g fill="#F4E6D6" id="img-d33459f5-14">
    <use xlink:href="#img-d33459f5-15" x="7.5" y="10"/>
  </g>
</g>
<defs>
  <g id="img-d33459f5-11">
    <circle cx="0" cy="0" r="3"/>
  </g>
  <g id="img-d33459f5-13">
    <circle cx="0" cy="0" r="3"/>
  </g>
  <g id="img-d33459f5-15">
    <circle cx="0" cy="0" r="3"/>
  </g>
</defs>
</svg>
</div><p>This is a little cryptic, but you can use this limited edition decoder ring:</p><pre><code class="language-julia">using Compose, Colors, Measures # hide
set_default_graphic_size(6cm, 4cm) # hide

figsize = 6mm
t = table(3, 2, 1:3, 2:2, y_prop=[1.0, 1.0, 1.0])
t[1,1] = [compose(context(minwidth=figsize + 2mm, minheight=figsize),
                  circle(0.5, 0.5, figsize/2), fill(LCHab(92, 10, 77)))]
t[2,1] = [compose(context(minwidth=figsize + 2mm, minheight=figsize),
                  rectangle(0.5cx - figsize/2, 0.5cy - figsize/2, figsize, figsize),
                  fill(LCHab(68, 74, 192)))]
t[3,1] = [compose(context(minwidth=figsize + 2mm, minheight=figsize),
                  polygon([(0.5cx - figsize/2, 0.5cy - figsize/2),
                           (0.5cx + figsize/2, 0.5cy - figsize/2),
                           (0.5, 0.5cy + figsize/2)]),
                  fill(LCHab(68, 74, 29)))]
t[1,2] = [compose(context(), text(0, 0.5, &quot;Context&quot;, hleft, vcenter))]
t[2,2] = [compose(context(), text(0, 0.5, &quot;Form&quot;, hleft, vcenter))]
t[3,2] = [compose(context(), text(0, 0.5, &quot;Property&quot;, hleft, vcenter))]
compose(context(), t, fill(LCHab(92, 10, 77)), fontsize(10pt))</code></pre><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="contexts.html"><span class="direction">Next</span><span class="title">Contexts</span></a></footer></article></body></html>
